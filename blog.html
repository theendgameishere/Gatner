<!DOCTYPE html>
<html lang="en" style="scroll-behavior: smooth;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog | Garner Electric Inc.</title>
    <meta name="description" content="Helpful articles, tips, and news from the experts at Garner Electric Inc.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontSize: { 'xs': ['0.875rem', { lineHeight: '1.25rem' }], 'sm': ['1rem', { lineHeight: '1.5rem' }], 'base': ['1.25rem', { lineHeight: '1.875rem' }], 'lg': ['1.375rem', { lineHeight: '1.875rem' }], 'xl': ['1.625rem', { lineHeight: '2.125rem' }], '2xl': ['2rem', { lineHeight: '2.5rem' }], '3xl': ['2.5rem', { lineHeight: '2.75rem' }], '4xl': ['3rem', { lineHeight: '1' }], '5xl': ['4rem', { lineHeight: '1' }], '6xl': ['5rem', { lineHeight: '1' }], '7xl': ['6rem', { lineHeight: '1' }], '8xl': ['7rem', { lineHeight: '1' }], },
                    spacing: { '10': '2.5rem', '12': '3rem', '16': '4rem', '20': '5rem', '24': '6rem', '28': '7rem', '32': '8rem', '36': '9rem', '48': '12rem', '64': '16rem', '96': '24rem', '108': '27rem', '120': '30rem' }
                }
            }
        }
    </script>

    <style>
        :root{ --dark:#111827; --dark-2:#1F2937; --accent:#FBBF24; }
        body{ font-family:'Roboto',sans-serif; background-color:var(--dark); color:#e5e7eb; overflow-x: hidden; }
        h1, h2, h3, h4, p, a, strong, span, li { color: inherit; }
        h1, h2, h3 { font-family: 'Poppins', sans-serif; }
        .gradient-text{ background:-webkit-linear-gradient(45deg,var(--accent),#F59E0B); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
        .cta-button{ transition:all .3s ease; box-shadow:0 4px 15px rgba(251,191,36,.2); }
        .cta-button:hover{ transform:translateY(-3px); box-shadow:0 8px 25px rgba(251,191,36,.4); }
        footer { background-color: var(--dark-2); }
        .blog-post-card { background-color: var(--dark-2); transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .blog-post-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.3); }

        /* Sticky Navigation Styles */
        #main-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background-color: rgba(31, 41, 55, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: top 0.3s;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .main-content {
            padding-top: 120px; /* Ensure content starts below the sticky nav */
        }
    </style>
</head>
<body class="text-gray-200">

<!-- Sticky Navigation Header -->
<nav id="main-nav" class="py-4">
    <div class="container mx-auto px-6 flex justify-between items-center">
        <a href="/index.html" class="text-2xl font-bold gradient-text">Garner Electric</a>
        <div class="hidden md:flex items-center space-x-8">
            <a href="/index.html#services" class="text-lg hover:text-amber-400 transition-colors">Services</a>
            <a href="/index.html#trust" class="text-lg hover:text-amber-400 transition-colors">About</a>
            <a href="/blog.html" class="text-lg text-amber-400 font-bold transition-colors">Blog</a> <!-- Highlight current page -->
            <a href="/index.html#contact" class="cta-button bg-amber-500 text-gray-900 font-bold py-2 px-6 rounded-full text-lg shadow-lg hover:bg-amber-400">Contact</a>
        </div>
    </div>
</nav>

<!-- Main Content Area -->
<main class="main-content py-20">
    <div class="container mx-auto px-6">
        <div class="text-center mb-16">
            <h1 class="text-5xl md:text-7xl font-bold text-white"><span class="gradient-text">Our Blog</span></h1>
            <p class="text-xl text-gray-400 max-w-2xl mx-auto mt-4">Insights, safety tips, and project spotlights from your trusted electricians.</p>
        </div>

        <!-- This is where Sanity.io will inject your blog posts -->
        <div id="blog-posts-container" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Loading indicator -->
            <p id="loading-indicator" class="text-lg text-center col-span-full">Loading posts...</p>
            <!-- Blog posts will be appended here by JavaScript -->
        </div>
    </div>
</main>

<footer>
    <div class="container mx-auto py-8 px-6 text-center text-gray-400">
        <p class="text-base">© 2025 Garner Electric Inc. All Rights Reserved. | Licensed & Insured Master Electrician</p>
        <p class="text-base mt-2">Serving Deatsville, Millbrook, Prattville, Montgomery, and all of Central Alabama.</p>
    </div>
</footer>

<!-- Sanity.io Client -->
<script src="https://cdn.jsdelivr.net/npm/@sanity/client@latest/dist/sanityClient.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    // === INSTRUCTIONS: Step 3 - Configure the Sanity Client ===
    // Replace 'YOUR_PROJECT_ID' with the Project ID from your Sanity project settings.
    const sanity = window.sanityClient.createClient({
        projectId: 'YOUR_PROJECT_ID',
        dataset: 'production',
        apiVersion: '2024-07-22', // Use a recent date
        useCdn: true, // `false` if you want to ensure fresh data
    });

    const postsContainer = document.getElementById('blog-posts-container');
    const loadingIndicator = document.getElementById('loading-indicator');

    // GROQ query to fetch all documents of type 'post'
    const query = `*[_type == "post"] | order(publishedAt desc) {
        title,
        "slug": slug.current,
        "mainImageUrl": mainImage.asset->url,
        "authorName": author->name,
        publishedAt,
        excerpt
    }`;

    sanity.fetch(query).then(posts => {
        loadingIndicator.style.display = 'none'; // Hide loading indicator

        if (posts && posts.length > 0) {
            posts.forEach(post => {
                const postCard = `
                    <a href="/post.html?slug=${post.slug}" class="blog-post-card block rounded-xl shadow-2xl overflow-hidden">
                        <img class="h-64 w-full object-cover" src="${post.mainImageUrl}?w=600&h=400&fit=crop" alt="${post.title}">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold text-white mb-2">${post.title}</h3>
                            <p class="text-gray-400 mb-4">${post.excerpt}</p>
                            <div class="text-sm text-amber-400">
                                <span>By ${post.authorName}</span> •
                                <span>${new Date(post.publishedAt).toLocaleDateString()}</span>
                            </div>
                        </div>
                    </a>
                `;
                postsContainer.innerHTML += postCard;
            });
        } else {
            postsContainer.innerHTML = '<p class="text-lg text-center col-span-full">No blog posts found.</p>';
        }
    }).catch(err => {
        loadingIndicator.style.display = 'none';
        console.error('Error fetching from Sanity:', err);
        postsContainer.innerHTML = '<p class="text-lg text-center col-span-full text-red-500">Failed to load posts. Please check the console for errors.</p>';
    });
});
</script>

</body>
</html>
